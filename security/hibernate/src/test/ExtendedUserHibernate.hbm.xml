<?xml version="1.0"?>
  <!DOCTYPE hibernate-mapping PUBLIC
   "-//Hibernate/Hibernate Mapping DTD 2.0//EN" 
   "http://hibernate.sourceforge.net/hibernate-mapping-2.0.dtd"> 

  <hibernate-mapping auto-import="true">
    <class name="org.apache.fulcrum.security.model.dynamic.entity.DynamicPermission" table="PERMISSION" >
      <id name="id" type="long" column="PERMISSION_ID" unsaved-value="0">
           <generator class="native"/>
        </id>
      <property name="name" column="NAME" type="string"/>          
    </class>
    
    <class name="org.apache.fulcrum.security.model.dynamic.entity.DynamicRole" table="ROLE" >
      <id name="id" type="long" column="ROLE_ID" unsaved-value="0">
           <generator class="native"/>
        </id>
      <property name="name" column="NAME" type="string"/>      
      
    <set name="permissionsAsSet" lazy="true" table="ROLE_PERMISSION">
        <key column="ROLE_ID"/>
        <many-to-many class="org.apache.fulcrum.security.model.dynamic.entity.DynamicPermission" column="PERMISSION_ID"/> 
      </set>
      
    <set name="groupsAsSet" lazy="true" table="GROUP_ROLE" inverse="true" cascade="none">
        <key column="ROLE_ID"/>
        <many-to-many class="org.apache.fulcrum.security.model.dynamic.entity.DynamicGroup" column="GROUP_ID"/> 
      </set>         
    </class>   

    <class name="org.apache.fulcrum.security.model.dynamic.entity.DynamicGroup" table="GROUPS" >
      <id name="id" type="long" column="GROUP_ID" unsaved-value="0">
           <generator class="native"/>
        </id>
      <property name="name" column="NAME" type="string"/>      
      
    <set name="rolesAsSet" lazy="true" table="GROUP_ROLE" cascade="none" >
        <key column="GROUP_ID"/>
        <many-to-many class="org.apache.fulcrum.security.model.dynamic.entity.DynamicRole" column="ROLE_ID"/> 
      </set>
      
    <set name="usersAsSet" lazy="true" table="HIBUSER_GROUP" cascade="none" >
        <key column="GROUP_ID"/>
        <many-to-many class="org.apache.fulcrum.security.hibernate.dynamic.entity.ExtendedUser" column="USER_ID"/> 
      </set>        
    </class>   

    <class name="org.apache.fulcrum.security.hibernate.dynamic.entity.ExtendedUser" table="EXTENDED_USER" >
      <id name="id" type="long" column="HIBUSER_ID" unsaved-value="0">
           <generator class="native"/>
        </id>
      <property name="name" column="USERNAME" type="string"/>      
      <property name="password" column="PASSWORD" type="string"/>            
      <property name="NTDomain" column="NT_DOMAIN" type="string"/>            
      <property name="NTName" column="NT_USERNAME" type="string"/>    
      <property name="email" column="EMAIL" type="string"/>       
      <set name="groupsAsSet" lazy="true" table="HIBUSER_GROUP" inverse="true" cascade="none">
        <key column="USER_ID"/>
        <many-to-many class="org.apache.fulcrum.security.model.dynamic.entity.DynamicGroup" column="GROUP_ID"/> 
      </set>
    </class>    

    
  </hibernate-mapping>